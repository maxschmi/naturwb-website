let btnLoad=document.getElementById("btnLoad");null!==btnLoad&&btnLoad.addEventListener("click",e=>{let inputFile;document.getElementById("FileInput").click()});let inputFile=document.getElementById("FileInput");null!==inputFile&&inputFile.addEventListener("input",e=>{if(0==e.target.files.length)return;let file=e.target.files[0];file.arrayBuffer().then(bufferResult=>{file.name.match(/^.*\.zip$/)?shp.parseZip(bufferResult).then(geojson=>{0==geojson.features.length?alert("Es konnte kein Polygon in ihrer Datei gefunden werden!"):(geojson.features.length>1&&alert("In ihrer Datei wurde mehr als ein Polygon gefunden, allerdings wird nur das erste geladen!\n Wenn Sie ein Gebiet aus mehreren Polygonen untersuchen wollen, vereinigen Sie diese im Vorfeld zu einem MultiPolygon."),add_geometry_to_map(geojson.features[0].geometry))}):alert("Ihre Datei konnte leider nicht reingeladen werden!\nÜberprüfen Sie diese. Es muss ein ZIP-Ordner, mit den Shape-Dateien eines Polygons sein.")}),e.target.value=""});let add_geometry_to_map=function(geometry){console.log(geometry),document.getElementById("id_geom").value=JSON.stringify(geometry);let map=maps[0],geometryField;map.eachLayer(layer=>{void 0!==layer._path&&maps[0].removeLayer(layer)}),new L.GeometryField(geodjango_id_geom).addTo(map);let drawUtilities=document.querySelectorAll(".leaflet-control-container > div > .leaflet-draw.leaflet-control.id_geom");drawUtilities.length>1&&drawUtilities[0].remove()};